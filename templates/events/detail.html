{% extends 'base.html' %}
{% load static i18n %}

{% block title %}{{ event.title }}{% endblock %}

{% block extra_css %}
<style>
    /* Hero */
    .event_hero { position: relative; min-height: 52vh; display: flex; align-items: flex-end; padding: 60px 0 30px; background-position: center; background-size: cover; }
    .event_hero::before { content:''; position:absolute; inset:0; background: linear-gradient(180deg, rgba(0,0,0,.25) 0%, rgba(0,0,0,.6) 60%, rgba(0,0,0,.9) 100%); }
    .event_hero .container { position: relative; z-index: 2; }
    .event_title { color:#fff; font-weight:900; font-size: 2.2rem; margin:0 0 10px; }
    .event_badge { display:inline-block; background: linear-gradient(135deg,#ff6b35,#f7931e); color:#fff; padding:6px 12px; border-radius:999px; font-size:12px; font-weight:800; margin-inline-start:10px; }
    .meta_row { display:flex; flex-wrap:wrap; gap:14px; color:#f1f1f1; opacity:.95; }
    .meta_item { display:flex; align-items:center; gap:8px; font-weight:600; }
    .meta_item i { color:#ff6b35; }

    /* Body */
    .event_detail_wrap { background:#0f0f0f; padding: 40px 0 80px; }
    .left_col { color:#ddd; }
    .feature_grid { display:grid; grid-template-columns: repeat(auto-fit,minmax(220px,1fr)); gap:16px; margin: 20px 0 30px; }
    .feature_card { background:#161616; border:1px solid rgba(255,255,255,.08); border-radius:14px; padding:14px; display:flex; align-items:center; gap:10px; }
    .feature_card i { color:#ff6b35; font-size:18px; }
    .event_cover { border-radius: 16px; overflow: hidden; border: 1px solid rgba(255,255,255,.08); box-shadow: 0 18px 40px rgba(0,0,0,.35); margin-bottom: 20px; }
    .event_cover img { width: 100%; height: auto; display: block; }
    .event_body { color:#e7e7e7; line-height: 2; font-size: 16px; }

    /* Sidebar */
    .event_sidebar { position: sticky; top: 90px; background: #161616; border: 1px solid rgba(255,255,255,.08); border-radius: 16px; padding: 20px; color: #ddd; }
    .event_price { color: #ff6b35; font-weight: 900; font-size: 22px; }
    .event_action { display:block; text-align:center; background: linear-gradient(135deg,#ff6b35,#f7931e); color:#fff; padding:14px 18px; border-radius:12px; font-weight:800; text-decoration:none; margin-top:12px; }
    .event_action:hover { color:#fff; text-decoration:none; box-shadow:0 12px 28px rgba(255,107,53,.35); }

    /* Gallery + related */
    .section_head { color:#fff; font-weight:900; margin: 34px 0 14px; }
    .gallery_grid { display:grid; grid-template-columns: repeat(auto-fit,minmax(180px,1fr)); gap:12px; }
    .gallery_item { border-radius:10px; overflow:hidden; border:1px solid rgba(255,255,255,.08); }
    .related_list { display:grid; grid-template-columns: repeat(auto-fit,minmax(250px,1fr)); gap:16px; }
    .related_card { background:#171717; border:1px solid rgba(255,255,255,.08); border-radius:12px; overflow:hidden; color:#ddd; text-decoration:none; }
    .related_card img { width:100%; height:150px; object-fit:cover; display:block; }
    .related_card_body { padding:12px; }
</style>
{% endblock %}

{% block content %}
<div class="event_hero" style="background-image:url('{{ event.image.url }}');">
    <div class="container">
        <h1 class="event_title">{{ event.title }}{% if event.category %}<span class="event_badge">{{ event.category.name }}</span>{% endif %}</h1>
        <div class="meta_row">
            <div class="meta_item"><i class="fa fa-calendar"></i><span>{{ event.event_date|date:"Y/m/d" }}</span></div>
            <div class="meta_item"><i class="fa fa-clock-o"></i><span>{{ event.event_date|time:"H:i" }}</span></div>
            <div class="meta_item"><i class="fa fa-map-marker"></i><span>{{ event.location }}</span></div>
            {% if event.capacity %}<div class="meta_item"><i class="fa fa-users"></i><span>{{ event.capacity }}</span></div>{% endif %}
            <div class="meta_item"><i class="fa fa-eye"></i><span>{{ event.views_count }}</span></div>
        </div>
    </div>
</div>

<div class="event_detail_wrap">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 left_col">
                <div class="feature_grid">
                    <div class="feature_card"><i class="fa fa-calendar"></i><div>{% trans "تاریخ" %}<div style="color:#aaa; font-weight:700;">{{ event.event_date|date:"l d F Y" }}</div></div></div>
                    <div class="feature_card"><i class="fa fa-clock-o"></i><div>{% trans "ساعت" %}<div style="color:#aaa; font-weight:700;">{{ event.event_date|time:"H:i" }}</div></div></div>
                    <div class="feature_card"><i class="fa fa-map-marker"></i><div>{% trans "مکان" %}<div style="color:#aaa; font-weight:700;">{{ event.location }}</div></div></div>
                    {% if event.price %}<div class="feature_card"><i class="fa fa-ticket"></i><div>{% trans "قیمت بلیط" %}<div style="color:#aaa; font-weight:700;">{{ event.price }} TL</div></div></div>{% else %}<div class="feature_card"><i class="fa fa-ticket"></i><div>{% trans "قیمت بلیط" %}<div style="color:#aaa; font-weight:700;">{% trans "رایگان" %}</div></div></div>{% endif %}
                </div>

                <div class="event_cover"><img src="{{ event.image.url }}" alt="{{ event.title }}"></div>
                <div class="event_body">{{ event.description|safe }}</div>

                {% if event.images.all %}
                <h4 class="section_head">{% trans "گالری تصاویر" %}</h4>
                <div class="gallery_grid">
                    {% for img in event.images.all %}
                    <div class="gallery_item"><img src="{{ img.image.url }}" alt="{{ img.caption|default:event.title }}"></div>
                    {% endfor %}
                </div>
                {% endif %}

                {% if related_events %}
                <h4 class="section_head">{% trans "رویدادهای مرتبط" %}</h4>
                <div class="related_list">
                    {% for re in related_events %}
                    <a href="{% url 'events:detail' slug=re.slug %}" class="related_card">
                        <img src="{{ re.image.url }}" alt="{{ re.title }}">
                        <div class="related_card_body">
                            <div style="font-weight:800; color:#fff;">{{ re.title }}</div>
                            <div style="font-size:12px; color:#aaa;">{{ re.event_date|date:"Y/m/d" }} - {{ re.location }}</div>
                        </div>
                    </a>
                    {% endfor %}
                </div>
                {% endif %}
            </div>
            <div class="col-lg-4">
                <div class="event_sidebar">
                    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:8px;">
                        <span style="color:#aaa;">{% trans "قیمت" %}</span>
                        <span class="event_price">{% if event.price %}{{ event.price }} TL{% else %}{% trans "رایگان" %}{% endif %}</span>
                    </div>
                    {% if event.address %}<div style="margin:6px 0; color:#999; font-size:14px;"><i class="fa fa-map-o" style="color:#ff6b35;"></i> {{ event.address }}</div>{% endif %}
                    <a href="{% url 'events:register' slug=event.slug %}" class="event_action">{% trans "ثبت‌نام در رویداد" %}</a>
                    <a href="{% url 'contact:contact' %}" class="event_action" style="margin-top:10px; background:linear-gradient(135deg,#5a5a5a,#777);">{% trans "سوال دارید؟ تماس بگیرید" %}</a>
                </div>
            </div>
        </div>
    </div>
    </div>
{% endblock %}


